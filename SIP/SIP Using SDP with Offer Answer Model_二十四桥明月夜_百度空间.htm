
<!-- saved from url=(0082)http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>SIP Using SDP with Offer/Answer Model_二十四桥明月夜_百度空间      </title>

<style type="text/css">
    .error{color:#FF0000;font-size:12px}
    .shareUser,.shareLastEditor{line-height:20px;color:#666666;text-align:left}
    .shareLastEditor{margin:5px 0 8px;}
</style>

<script type="text/javascript">
    var g_pageTimerStart=new Date().getTime();
</script>

<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/global.js"></script>
<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/libs.js"></script>
<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/tangram-1.1.0.js"></script>


<script type="text/javascript">
var Session = {
    isLogin: ! true,
    isHost: "",
    userName: "明月夜2001",   
    userPortrait:'3d02c3f7d4c2d2b932303031c307',
    spaceURL: "/%C3%F7%D4%C2%D2%B92001",
    spBasicURL:"明月夜2001",
    spBasicURLEnc:"%C3%F7%D4%C2%D2%B92001",
    visitorName:    "",
    visitorPortrait:'00000000',
    isActive: '',   
    visitorURL: "/index.html",        // 
    pageURL: "http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a%2Ehtml",    
    refer: "http://www.google.ca/search?hl=zh-CN&q=SIP+SDP+offer+answer&oq=SIP+SDP+offer+answer&aq=f&aqi=&aql=&gs_sm=e&gs_upl=493295l497121l0l497440l18l16l0l10l0l0l184l184l0.1l1l0",
    spToken: '0f2dff922f54e9f9afe1b8c0ca91c01b', 
    spFriendDomain: 'http://frd.baidu.com',
    spSpaceDomain: 'http://hi.baidu.com',
    spPortraitDomain: '',
    spSpaceStaticDomain: 'http://hi.baidu.com' 

    ,isDrag:  false  
    ,isProfile:  false   
    ,isPortraitVerify:!true
    };
</script>

<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/brwstat"></script><link type="text/css" rel="stylesheet" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/ucard.css"><script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/ucard.js"></script><script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/check_baiduhi.js"></script></head>

<body><iframe frameborder="0" name="_BdPopupLayer_iwdlxf-cjp5k07sf4vi-cfe7i0" style="position:absolute; z-index:65001; display:none;" scrolling="no" id="_BdPopupLayer_iwdlxf-cjp5k07sf4vi-cfe7i0"></iframe><iframe frameborder="0" name="_BdPopupLayer_xwivlw-r8h8azg5ta86-5bfyxm" style="position:absolute; z-index:65001; display:none;" scrolling="no" id="_BdPopupLayer_xwivlw-r8h8azg5ta86-5bfyxm"></iframe><link href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/bdeditor.css" type="text/css" rel="Stylesheet">

<center>

<script type="text/javascript">
/*<![CDATA[*/
if(top.location != self.location){
	top.location = self.location;
}
var myref = encodeURIComponent("http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a%2Ehtml");
/*]]>*/
</script>
<link rel="stylesheet" type="text/css" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/mods.css">

<link rel="stylesheet" type="text/css" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/6d8a62b01aabff5408230274.css">

<link rel="stylesheet" type="text/css" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/space.css">

<div class="userbar">
    <div id="nav">
        <a class="logo" href="http://hi.baidu.com/index.htm"><img src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/logo.gif" border="0" alt="图片"></a>



        <div class="manage">
            <form action="https://passport.baidu.com/?login" method="post">
                用户名:<input type="text" name="username">&nbsp;&nbsp; 
                密码:<input type="password" name="password"> 
                <input type="hidden" name="mem_pass" value="on">
                <input type="submit" value="" style="width:0; height:0;">
                <a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#" class="loginlink" onclick="this.parentNode.submit(); return false;">登录</a>  
            </form> 
            <a href="http://hi.baidu.com/reg/new" class="reglink">注册</a>
        </div>

    </div>
</div>

<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/base.js"></script>
 <link rel="stylesheet" type="text/css" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/base.css">


		



<div id="main" align="left">

<!--[if IE]>
<script>
var objmain = document.getElementById("main");
function updatesize(){ var bodyw = window.document.body.offsetWidth; if(bodyw <= 790) objmain.style.width="772px"; else if(bodyw >= 1016) objmain.style.width="996px"; else objmain.style.width="100%"; }
updatesize(); window.onresize = updatesize;
</script>
<![endif]-->

	<div id="header">

	<div class="lc"><div class="rc"></div></div>
<div class="tit"><a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/home" class="titlink" title="明月夜2001的空间 http://hi.baidu.com/明月夜2001">二十四桥明月夜</a></div>
<div class="desc">无</div>
<div id="tabline">&nbsp;</div>

	<div id="tab"><a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/home">主页</a><a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog" class="on">博客</a><a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/album">相册</a><span>|</span><a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/profile">个人档案</a>

	<span>|</span><a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/friends">好友</a>


<span>|</span><a href="http://tieba.baidu.com/i/sys/jump?un=%C3%F7%D4%C2%D2%B92001&fr=spacebar" onclick="BdUtil.ns_trackerLink(&#39;m_20110330_spacebar&#39;,&#39;&#39;)" target="_blank">i贴吧</a>


	</div>

</div>



<div class="stage">

<div class="stagepad">

<div style="width:100%">


<table width="100%" border="0" cellspacing="0" cellpadding="0" class="modth">

	<tbody><tr><td class="modtl" width="7">&nbsp;</td>

	<td class="modtc" nowrap=""><div class="modhead"><span class="modtit">查看文章</span></div></td>

	<td class="modtc" nowrap="" align="right"></td>

	<td class="modtr" width="7">&nbsp;</td>

	</tr></tbody></table>



<div id="m_blog" class="modbox" style="overflow-x:hidden;">

<div class="tit">

SIP Using SDP with Offer/Answer Model</div>

<div class="date">2009年08月13日 星期四  15:50</div>




<table style="table-layout:fixed;width:100%"><tbody><tr><td><div id="blog_text" class="cnt"><p align="center" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">SIP Using SDP with Offer/Answer Model</font></font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font face="宋体, SimSun"><font size="2">根据</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC3261-13.2.1</font></font></font><font face="宋体, SimSun"><font size="2">所述，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SIP</font></font></font><font face="宋体, SimSun"><font size="2">使用的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型是建立在对话环境下的。</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC</font></font></font><font face="宋体, SimSun"><font size="2">中还特意对</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">交互有限制：</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">初始</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">必须在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">INVITE</font></font></font><font face="宋体, SimSun"><font size="2">消息或者第一个可靠的非失败型响应中。注：当时</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC3261</font></font></font><font face="宋体, SimSun"><font size="2">中可靠效应只有</font></font><font face="宋体, SimSun"><font size="2"><font size="2">2**</font></font></font><font face="宋体, SimSun"><font size="2">，接下来将讲到</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">（除</font></font><font face="宋体, SimSun"><font size="2"><font size="2">100</font></font></font><font face="宋体, SimSun"><font size="2">外）也可为可靠性效应。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果初始</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">INVITE</font></font></font><font face="宋体, SimSun"><font size="2">消息中，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须出现在一个可靠的非失败型响应中。可能在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">中就带有</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">（但该</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须与之后的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">2**</font></font></font><font face="宋体, SimSun"><font size="2">中的一致），</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAC</font></font></font><font face="宋体, SimSun"><font size="2">将忽略同一事务之后出现的回应中的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果初始</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">出现在第一个可靠的非失败型响应中，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须出现在对该响应的确认消息中（</font></font><font face="宋体, SimSun"><font size="2"><font size="2">ACK</font></font></font><font face="宋体, SimSun"><font size="2">）。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果已经发送或接受对于第一个</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAC</font></font></font><font face="宋体, SimSun"><font size="2">可以继续发送新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">；相反的，如果没有确认对前一个</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">，不能发送新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果已经发送或接受对于初始</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAS</font></font></font><font face="宋体, SimSun"><font size="2">禁止在之后同一个事务的响应消息中带上新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;</font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;</font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;&nbsp;&nbsp; <font face="宋体, SimSun"><font size="2">根据</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC3262-5</font></font></font><font face="宋体, SimSun"><font size="2">所述，对于</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Anwer</font></font></font><font face="宋体, SimSun"><font size="2">模型引入了新的扩展。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果</font></font><font face="宋体, SimSun"><font size="2"><font size="2">INVITE</font></font></font><font face="宋体, SimSun"><font size="2">消息带有</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAS</font></font></font><font face="宋体, SimSun"><font size="2">必须在一个可靠的非失败型的响应中提供</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">。这将在呼叫完成之前建立好会话。同样，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">可以出现在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">中，因为</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC3262</font></font></font><font face="宋体, SimSun"><font size="2">提供了</font></font><font face="宋体, SimSun"><font size="2"><font size="2">PRACK</font></font></font><font face="宋体, SimSun"><font size="2">方法来保证</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">消息为可靠消息。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAC</font></font></font><font face="宋体, SimSun"><font size="2">接收到</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">中的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">，必须在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">PRACK</font></font></font><font face="宋体, SimSun"><font size="2">方法中带有</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">。但是如果</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAC</font></font></font><font face="宋体, SimSun"><font size="2">收到</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">中的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">，则可能在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">PRACK</font></font></font><font face="宋体, SimSun"><font size="2">带上新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">。如果</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAS</font></font></font><font face="宋体, SimSun"><font size="2">接收到</font></font><font face="宋体, SimSun"><font size="2"><font size="2">PRACK</font></font></font><font face="宋体, SimSun"><font size="2">中的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">，则必须在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">2**</font></font></font><font face="宋体, SimSun"><font size="2">中带上</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">交互成功的话，在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">INVITE</font></font></font><font face="宋体, SimSun"><font size="2">事务没有完成之前也能建立好会话。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">中带有</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">的话，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UAS</font></font></font><font face="宋体, SimSun"><font size="2">在没有收到对</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1**</font></font></font><font face="宋体, SimSun"><font size="2">的确认之前不能发送</font></font><font face="宋体, SimSun"><font size="2"><font size="2">2**</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;</font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;</font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">根据</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC3264</font></font></font><font face="宋体, SimSun"><font size="2">所述，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">建立媒体选择项（高层如</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SIP</font></font></font><font face="宋体, SimSun"><font size="2">提供），而</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">端可以接受或拒绝，取决于高层。</font></font><font face="宋体, SimSun"><font size="2"><font size="2">UA</font></font></font><font face="宋体, SimSun"><font size="2">可以通过新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">交互来进行会话更新，但旧的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">交互未结束之前不可发起新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">发起初始</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">：虽然</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SDP(RFC4566)</font></font></font><font face="宋体, SimSun"><font size="2">允许在一个</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SDP</font></font></font><font face="宋体, SimSun"><font size="2">消息中支持多个会话，但具有</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SDP</font></font></font><font face="宋体, SimSun"><font size="2">消息只能包含一个对话描述。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Offer</font></font></font><font face="宋体, SimSun"><font size="2">可以包含</font></font><font face="宋体, SimSun"><font size="2"><font size="2">0</font></font></font><font face="宋体, SimSun"><font size="2">个或更多的媒体流（每个媒体流使用一个“</font></font><font face="宋体, SimSun"><font size="2"><font size="2">m=”</font></font></font><font face="宋体, SimSun"><font size="2">行和相关的属性来描述的）。</font></font><font face="宋体, SimSun"><font size="2"><font size="2">0</font></font></font><font face="宋体, SimSun"><font size="2">个媒体流代表只是连接，之后可以通过新的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">来更新会话。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">构建单点传播媒体</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">：</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1</font></font></font><font face="宋体, SimSun"><font size="2">）媒体流方向，包含</font></font><font face="宋体, SimSun"><font size="2"><font size="2">recvonly</font></font></font><font face="宋体, SimSun"><font size="2">、</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendrecv</font></font></font><font face="宋体, SimSun"><font size="2">（默认）、</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendonly</font></font></font><font face="宋体, SimSun"><font size="2">及</font></font><font face="宋体, SimSun"><font size="2"><font size="2">inactive</font></font></font><font face="宋体, SimSun"><font size="2">。但需要注意的是在</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTP</font></font></font><font face="宋体, SimSun"><font size="2">协议中，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTCP</font></font></font><font face="宋体, SimSun"><font size="2">不会受该方向影响，即任何设置情况下均处于工作状态。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">对于</font></font><font face="宋体, SimSun"><font size="2"><font size="2">recvonly</font></font></font><font face="宋体, SimSun"><font size="2">和</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendrecv</font></font></font><font face="宋体, SimSun"><font size="2">方向的媒体流来说，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">中的端口号码和地址指示了提供方接受媒体流的地方。对于</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendonly</font></font></font><font face="宋体, SimSun"><font size="2">方向的媒体流来说，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">中的端口号码和地址间接指示了提供方接受</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTCP</font></font></font><font face="宋体, SimSun"><font size="2">的地方（除非特殊说明，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTCP</font></font></font><font face="宋体, SimSun"><font size="2">的端口比对应</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTP</font></font></font><font face="宋体, SimSun"><font size="2">端口高一位）。如果端口是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">0</font></font></font><font face="宋体, SimSun"><font size="2">，则只提供、拒绝或终止媒体流。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">对于</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendonly</font></font></font><font face="宋体, SimSun"><font size="2">和</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendrecv</font></font></font><font face="宋体, SimSun"><font size="2">流来说，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">可能对于同一编码指示不同的负载类型编号（</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Payload Type Number</font></font></font><font face="宋体, SimSun"><font size="2">），在这种情况下，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">必须采取</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">中的编号值。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">对于</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTP</font></font></font><font face="宋体, SimSun"><font size="2">流，媒体描述需要使用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">"a=rtpmap"</font></font></font><font face="宋体, SimSun"><font size="2">来映射</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTP</font></font></font><font face="宋体, SimSun"><font size="2">媒体负载类型编号，如果没有对应的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">"a=rtpmap"</font></font></font><font face="宋体, SimSun"><font size="2">行，则使用当前默认的配置（</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RFC 1890</font></font></font><font face="宋体, SimSun"><font size="2">）。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “m=”</font></font></font><font face="宋体, SimSun"><font size="2">行中所列的编码必须采取优先顺序排列。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">对于</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">中的每个“</font></font><font face="宋体, SimSun"><font size="2"><font size="2">m=”</font></font></font><font face="宋体, SimSun"><font size="2">行，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">中必须有对应的“</font></font><font face="宋体, SimSun"><font size="2"><font size="2">m=”</font></font></font><font face="宋体, SimSun"><font size="2">行。</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">中的“</font></font><font face="宋体, SimSun"><font size="2"><font size="2">t=”</font></font></font><font face="宋体, SimSun"><font size="2">行必须与</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">行的一致。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">拒绝某个</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">的流，该流的端口值必须设置为</font></font><font face="宋体, SimSun"><font size="2"><font size="2">0.</font></font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">10.&nbsp;&nbsp;&nbsp;&nbsp; Offer</font></font></font><font face="宋体, SimSun"><font size="2">如果是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendonly</font></font></font><font face="宋体, SimSun"><font size="2">，则</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须为</font></font><font face="宋体, SimSun"><font size="2"><font size="2">recvonly</font></font></font><font face="宋体, SimSun"><font size="2">或者</font></font><font face="宋体, SimSun"><font size="2"><font size="2">inactive</font></font></font><font face="宋体, SimSun"><font size="2">；</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">如果是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">recvonly</font></font></font><font face="宋体, SimSun"><font size="2">，则</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须为</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendonly</font></font></font><font face="宋体, SimSun"><font size="2">或者</font></font><font face="宋体, SimSun"><font size="2"><font size="2">inactive</font></font></font><font face="宋体, SimSun"><font size="2">；</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">如果是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendrecv</font></font></font><font face="宋体, SimSun"><font size="2">，则</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须为</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendrecv</font></font></font><font face="宋体, SimSun"><font size="2">、</font></font><font face="宋体, SimSun"><font size="2"><font size="2">recvonly</font></font></font><font face="宋体, SimSun"><font size="2">、</font></font><font face="宋体, SimSun"><font size="2"><font size="2">sendonly</font></font></font><font face="宋体, SimSun"><font size="2">或者</font></font><font face="宋体, SimSun"><font size="2"><font size="2">inactive</font></font></font><font face="宋体, SimSun"><font size="2">；</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">如果是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">inactive</font></font></font><font face="宋体, SimSun"><font size="2">，则</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">必须为</font></font><font face="宋体, SimSun"><font size="2"><font size="2">inactive</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">11.&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">即使</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">senonly</font></font></font><font face="宋体, SimSun"><font size="2">型，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">的地址和端口也必须存在，因为需要传送</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTCP</font></font></font><font face="宋体, SimSun"><font size="2">。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">12.&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTP</font></font></font><font face="宋体, SimSun"><font size="2">，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">使用特定负载编号来与某编码相对应，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">应该保持这种对应关系。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">13.&nbsp;&nbsp;&nbsp;&nbsp; Answer</font></font></font><font face="宋体, SimSun"><font size="2">中的“</font></font><font face="宋体, SimSun"><font size="2"><font size="2">m=”</font></font></font><font face="宋体, SimSun"><font size="2">行编码应具有优先顺序，以便</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">能采用最高优先级的选项。但即便如此，建议</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">采取与</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">相同的优先顺序。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">14.&nbsp;&nbsp;&nbsp;&nbsp; ptime</font></font></font><font face="宋体, SimSun"><font size="2">指示接受的打包间隔，但并不要求双方的</font></font><font face="宋体, SimSun"><font size="2"><font size="2">ptime</font></font></font><font face="宋体, SimSun"><font size="2">值一致。但发送媒体流时应该按照</font></font><font face="宋体, SimSun"><font size="2"><font size="2">ptime</font></font></font><font face="宋体, SimSun"><font size="2">指示的打包间隔来发送。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">15.&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">如果是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">RTP</font></font></font><font face="宋体, SimSun"><font size="2">流，</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">应该采用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">提供的负载编码编号。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">16.&nbsp;&nbsp;&nbsp;&nbsp; </font></font></font><font face="宋体, SimSun"><font size="2">当</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer</font></font></font><font face="宋体, SimSun"><font size="2">收到</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">后，必须采用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Answer</font></font></font><font face="宋体, SimSun"><font size="2">中的媒体类型中的一个，最后应该采用排列的第一个。</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a">&nbsp;</font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">按照上述，</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型的交互情况将如下：</font></font></font></p>
<p align="left" class="western"><a target="_blank" href="http://photo.blog.sina.com.cn/showpic.html#blogid=4b839a1b010092tl&url=http://static10.photo.sina.com.cn/orignal/4b839a1b44b1fdb15add9"><img width="520" height="254" border="0" align="bottom" name="4b839a1b44b1fdb15add9" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/File"></a></p>
<p align="center" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">图</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1 Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型交互图</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2"><font size="2">SIP</font></font></font><font face="宋体, SimSun"><font size="2">使用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型的交互情况如下：</font></font></font></p>
<p align="left" class="western"><a target="_blank" href="http://photo.blog.sina.com.cn/showpic.html#blogid=4b839a1b010092tl&url=http://static2.photo.sina.com.cn/orignal/4b839a1b06de997eb52e1"><img width="575" height="249" border="0" align="bottom" name="4b839a1b06de997eb52e1" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/File(1)"></a></p>
<p align="center" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">图</font></font><font face="宋体, SimSun"><font size="2"><font size="2">2 SIP</font></font></font><font face="宋体, SimSun"><font size="2">利用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型交互</font></font><font face="宋体, SimSun"><font size="2"><font size="2">1</font></font></font><font face="宋体, SimSun"><font size="2">图</font></font></font></p>
<p align="left" class="western"><a target="_blank" href="http://photo.blog.sina.com.cn/showpic.html#blogid=4b839a1b010092tl&url=http://static3.photo.sina.com.cn/orignal/4b839a1b44b1fef411e92"><img width="575" height="281" border="0" align="bottom" name="4b839a1b44b1fef411e92" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/File(2)"></a></p>
<p align="center" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">图</font></font><font face="宋体, SimSun"><font size="2"><font size="2">3 SIP</font></font></font><font face="宋体, SimSun"><font size="2">利用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型交互</font></font><font face="宋体, SimSun"><font size="2"><font size="2">2</font></font></font><font face="宋体, SimSun"><font size="2">图</font></font></font></p>
<p align="left" class="western"><a target="_blank" href="http://photo.blog.sina.com.cn/showpic.html#blogid=4b839a1b010092tl&url=http://static10.photo.sina.com.cn/orignal/4b839a1b44b1fef3d2f29"><img width="520" height="322" border="0" align="bottom" name="4b839a1b44b1fef3d2f29" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/File(3)"></a></p>
<p align="center" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">图</font></font><font face="宋体, SimSun"><font size="2"><font size="2">4 SIP</font></font></font><font face="宋体, SimSun"><font size="2">利用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型交互</font></font><font face="宋体, SimSun"><font size="2"><font size="2">3</font></font></font><font face="宋体, SimSun"><font size="2">图</font></font></font></p>
<p align="left" class="western"><a target="_blank" href="http://photo.blog.sina.com.cn/showpic.html#blogid=4b839a1b010092tl&url=http://static16.photo.sina.com.cn/orignal/4b839a1b44b1fef44293f"><img width="520" height="322" border="0" align="bottom" name="4b839a1b44b1fef44293f" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/File(4)"></a></p>
<p align="center" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">图</font></font><font face="宋体, SimSun"><font size="2"><font size="2">5 SIP</font></font></font><font face="宋体, SimSun"><font size="2">利用</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型交互</font></font><font face="宋体, SimSun"><font size="2"><font size="2">4</font></font></font><font face="宋体, SimSun"><font size="2">图</font></font></font></p>
<p align="left" class="western"><font color="#2a2a2a"><font face="宋体, SimSun"><font size="2">注：图中</font></font><font face="宋体, SimSun"><font size="2"><font size="2">NULL</font></font></font><font face="宋体, SimSun"><font size="2">代表</font></font><font face="宋体, SimSun"><font size="2"><font size="2">Offer/Answer</font></font></font><font face="宋体, SimSun"><font size="2">模型已经完成交互，并不是</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SDP</font></font></font><font face="宋体, SimSun"><font size="2">为空，此时</font></font><font face="宋体, SimSun"><font size="2"><font size="2">SDP</font></font></font><font face="宋体, SimSun"><font size="2">内媒体选项已经确定，所以不会再改变。</font></font></font></p></div></td></tr></tbody></table>

<br>

<div class="opt" id="blogOpt">

<a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/category/%B9%A4%D7%F7-sip%D1%D0%BE%BF" title="查看该分类中所有文章">类别：工作-sip研究</a>

| <a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#" onclick="addToShare(); return false;" target="_blank"><img src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/share_btn.gif" border="0" align="absbottom"></a>




	
	
    | <a title="将此文章分享到i贴吧" href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#" onclick="addToiTieba(); return false;" target="_blank">分享到i贴吧</a>

	| 浏览(<span id="result">350</span>)

	| <a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#send">评论</a>&nbsp;(<span id="blogCmtCount">0</span>)





</div>



<div class="line">&nbsp;</div>















<div id="in_reader">
    <div class="tit">最近读者：</div>

<table width="100%"><tbody><tr><td align="center" width="10%"><img border="0" width="55" height="55" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/portraitn.jpg"></td><td align="left" width="12%"><a href="https://passport.baidu.com/?login&tpl=sp&tpl_reg=sp&u=http%3A%2F%2Fhi.baidu.com%2F%25C3%25F7%25D4%25C2%25D2%25B92001%2Fblog%2Fitem%2F8410aca8b58b7ff51f17a26a%252Ehtml" target="_self" onclick="BdUtil.relogin(); return false;">登录</a>后，您就出现在这里。</td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/zhongxiakuihai" target="_blank" class="ucard" pid="cb6c7a686f6e677869616b7569686169f00c"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/cb6c7a686f6e677869616b7569686169f00c.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/bisake" target="_blank" class="ucard" pid="4652626973616b653d0b"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/4652626973616b653d0b.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/netlion" target="_blank" class="ucard" pid="99107a68616f6b657777775a0b"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/99107a68616f6b657777775a0b.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/q228209" target="_blank" class="ucard" pid="dfcc71323238323039ca0f"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/dfcc71323238323039ca0f.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/webccweb12" target="_blank" class="ucard" pid="962b77656263637765623132a417"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/962b77656263637765623132a417.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/thertherther22" target="_blank" class="ucard" pid="25ca7468657274686572746865723232fd15"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/25ca7468657274686572746865723232fd15.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/yanglei02xx02" target="_blank" class="ucard" pid="ac1079616e676c6569303278783032650c"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/ac1079616e676c6569303278783032650c.jpg"></a></td><td align="center" valign="bottom" width="10%" class="user"><a href="http://hi.baidu.com/sqwh1121" target="_blank" class="ucard" pid="864173717768313132316d0a"><img border="0" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/864173717768313132316d0a.jpg"></a></td><td width="100%"></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/zhongxiakuihai" target="_blank" class="ucard" pid="cb6c7a686f6e677869616b7569686169f00c">zhongxiakuihai</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/bisake" target="_blank" class="ucard" pid="4652626973616b653d0b">bisake</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/netlion" target="_blank" class="ucard" pid="99107a68616f6b657777775a0b">zhaokewww</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/q228209" target="_blank" class="ucard" pid="dfcc71323238323039ca0f">q228209</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/webccweb12" target="_blank" class="ucard" pid="962b77656263637765623132a417">webccweb12</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/thertherther22" target="_blank" class="ucard" pid="25ca7468657274686572746865723232fd15">thertherther22</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/yanglei02xx02" target="_blank" class="ucard" pid="ac1079616e676c6569303278783032650c">yanglei02xx02</a></td><td align="center" valign="top" class="user"><a href="http://hi.baidu.com/sqwh1121" target="_blank" class="ucard" pid="864173717768313132316d0a">sqwh1121</a></td><td></td></tr></tbody></table></div>





<div class="line">&nbsp;</div>










<div id="in_comment">

    <a name="comment"></a>

    <div class="tit">网友评论：</div>

    <span id="userCommentList"></span>    

    <div id="page"></div>

</div>

<form action="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/commit" id="blogCmtSubmitForm" name="blogCmtSubmitForm" method="post">
    <input type="hidden" name="bdstoken" value="0f2dff922f54e9f9afe1b8c0ca91c01b">
    <input type="hidden" name="ct" value="8">
    <input type="hidden" name="cm" value="2">
    <input type="hidden" name="spBlogID" value="8410aca8b58b7ff51f17a26a">
    <input type="hidden" name="spBlogCmtID" value="">
    <input type="hidden" name="spRefURL" value="">
</form>






<div id="in_send">

<a name="send"></a>

<form name="form1" id="popFormSubmit" action="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/commit" method="post" onsubmit="return checkcmtform()">

<input type="hidden" name="bdstoken" value="0f2dff922f54e9f9afe1b8c0ca91c01b">

<input type="hidden" name="ct" value="8">

<input type="hidden" name="cm" value="1">

<input type="hidden" name="spBlogID" value="8410aca8b58b7ff51f17a26a">

<input type="hidden" name="spRefURL" id="spRefURL" value="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html">

<script>

    document.getElementById("spRefURL").value = window.location.href;

</script>

<div class="tit">发表评论：</div>

<table width="620" border="0" cellspacing="5" cellpadding="0">





<tbody><tr id="2_err" style="display:none">

<td>&nbsp;</td>

<td><div class="error" id="2_err_con"></div></td>

</tr>



<tr>

<td valign="top" class="f14" id="reTitle">内　容：</td>

<td>
	        <div id="bdeditor_container_olxlyb-wknla7nbkibg-imxx6j">            <table width="100%" height="155px" cellpadding="0" cellspacing="0" border="0">                <tbody><tr>                    <td id="editor_toolbar_olxlyb-wknla7nbkibg-imxx6j" class="ToolbarContainer" style="display: none; "><div class="ToolbarStrip"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td nowrap="nowrap"><div class="ToolbarItem" title="插入表情" id="ToolbarItem_edv7ub-cxwh9b87e0z0-c8ibka" onclick="_Instance[&#39;edv7ub-cxwh9b87e0z0-c8ibka&#39;].clickHandler(this)" onmouseup="_Instance[&#39;edv7ub-cxwh9b87e0z0-c8ibka&#39;].mouseUpHandler(this)" onmousedown="_Instance[&#39;edv7ub-cxwh9b87e0z0-c8ibka&#39;].mouseDownHandler(this)" onmouseout="_Instance[&#39;edv7ub-cxwh9b87e0z0-c8ibka&#39;].mouseOutHandler(this)" onmouseover="_Instance[&#39;edv7ub-cxwh9b87e0z0-c8ibka&#39;].mouseOverHandler(this)"><div class="img Smiley" alt="插入表情"><font style="font-size:12px">插入表情</font></div></div></td></tr></tbody></table></div></td>                </tr>                <tr>                    <td id="editor_area_olxlyb-wknla7nbkibg-imxx6j" class="EditorContainer"><iframe width="100%" height="155px" frameborder="0" src="javascript:void(0)"></iframe></td>                </tr>            </tbody></table>        </div>    <textarea name="spBlogCmtText" id="spBlogCmtText" style="width: 520px; height: 155px; display: none; " tabindex="3" onfocus="hidErr(3);" onclick="BdUtil.relogin(); return false;"></textarea>
</td>

</tr>

<tr id="3_err" style="display:none">

<td>&nbsp;</td>

<td><div class="error" id="3_err_con"></div></td>

</tr>




<tr>

<td valign="top" class="f14">&nbsp;</td>

<td valign="top" class="f14"><input id="btn_ok" name="btn_ok" type="submit" autocomplete="off" onclick="BdUtil.relogin(); return false;" value="发表评论" tabindex="5">&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#" id="cancleReLink" onclick="canclereply(); return false;" style="display:none; font-size:12px;color:#666;">取消回复</a></td>

</tr>

</tbody></table>

</form>

</div>









<br>

</div>



<table width="100%" border="0" cellspacing="0" cellpadding="0" height="8">

<tbody><tr><td class="modbl" width="7">&nbsp;</td>

<td class="modbc">&nbsp;</td>

<td class="modbr" width="7">&nbsp;</td>

</tr></tbody></table>







</div>

</div>



</div>



</div>



<br><center><div id="ft">&#169;2011 Baidu</div></center>


</center>

<ul id="blogCmtContentList" style="display:none;">

</ul>

<!--inc_getmsgnum.html-->

<iframe id="submitiframe" name="submitiframe" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/blank.htm" style="display:none;"></iframe>
<script src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/comment.js" type="text/javascript"></script>

<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/detailpage.js"></script>
			


<script type="text/javascript">
/*<![CDATA[*/

var SP = SP || {};
if(!SP.mycard){
    SP.mycard = new (function(){
        var me = this;
        var _cancleAction = Session.isDrag;  
        var _list = [];
        var _sourceLoaded = false;    
        me.bind = function (_id){
            if(_cancleAction){  //abort
                return;
            }
            if(!_sourceLoaded){
                _list.push(_id);
            } else {
                baidu.space.mycard.bind(_id);
            }
        }
        me.init = function (_config){
            _cancleAction = !!_config.cancle;
        }
        me.onSourceLoaded = function (){
            _sourceLoaded = true;
            baidu.space.mycard.init({portrait: Session.visitorPortrait});
            for(var i=0,len=_list.length; i<len; i++){
                baidu.space.mycard.bind(_list[i]);
            }
        }
    })();
    baidu.dom.ready(function(){
        BdAjax.loadCSS('/ui/css/ucard/ucard.css?v=020507100.css');
        BdAjax.loadJS('/ui/scripts/ucard/ucard.js?v=020507100.js');
    });
}
SP.mycard.bind('m_blog');  
/*]]>*/
</script>

<script type="text/javascript">
    //*****there is some function。
    function checkMail(s)

    {

        var pattern=/\w+@\w+\.[a-z]+/;

        if(pattern.test(s))

        {

           return true;

        }

        else

       {

          return false;

       }

    }





    function checkeandu(eanduid)

    {

        var eanduvalue=baidu.G(eanduid).value;

        var len=baidu.string.getByteLength(eanduvalue);

        if(len>128)

        {

            showErr(2,"您输入的网址或邮箱太长，请保持在128字节以内。");

            return false;

        }

        else

        {

             return true;

        }



    }





    function checkname(strid)

    {

        var ele=baidu.G(strid);

        var len=baidu.string.getByteLength(ele.value);

        if(len>49)

        {

            showErr(1,"您输入的姓名太长，请保持在49字节以内。");

            return false;

        }

        else

        {

            if(len==0)

            {

                baidu.G(strid).value="匿名网友";

            }

             return true;

        }



    }



    function checktext(textid)

    {

            var tempStr='';

            var isLightFont=false;

            if(editor&&textid=="spBlogCmtText"){

                tempStr=editor.getHtml();
                
                /*
                //火星文处理，能不碰它就别碰它
                tempStr=tempStr.replace(/<span style="filter:glow\(color=#([0-9a-z]{3,6}),strength=2\);height:0px;color:#([0-9a-z]{3,6})">/ig,'');

                tempStr=tempStr.replace(/<\/span>/ig,'');
                */

                baidu.G("spBlogCmtText").value=tempStr;

                isLightFont=!(tempStr==editor.getHtml());

            }


            var str=baidu.string.trim(baidu.G(textid).value);
            baidu.G(textid).value=str;

            

            len=str.length;

            if(len==0 || ((/^[\s,　]+$/gi).test(str)) )

            {

                showErr(3,"您必须输入评论内容，请检查。");

                return false;

            }

            else

            {

                    var maxLength=isLightFont?916:1000;

                    if(len > maxLength)

                    {

                        showErr(3,"您输入的评论内容太长，请保持在500字以内。");

                        return false;

                    }

                    if(editor&&textid=="spBlogCmtText"){

                        baidu.G("spBlogCmtText").value=editor.getHtml();

                        baidu.G(textid).value=str;

                    }



                return true;

            }

    }



    function showErr(index,str)

    {

        baidu.G(index+"_err").style.display="";

        baidu.G(index+"_err_con").innerHTML=str;

    }

    function hidErr(index)

    {

        baidu.G(index+"_err").style.display="none";

        baidu.G(index+"_err_con").innerHTML="";

    }



    function alertPop(tit,con)

    {

        var pop=new Popup({ contentType:4,isReloadOnClose:false,width:340,height:80});

        pop.setContent("title",tit);

        pop.setContent("alertCon",con);

        pop.build();

        pop.show();

    }



    function cmtfull()

    {

        var cnum=0;

        if(cnum>=50000)

        {

            alertPop("发表评论","单篇日志评论数最多为50000条.");

            return false;

        }

        else

        {

            return true;

        }

    }


	function showCmtSuccess(){
		ShareBlog.showCmtShareResult(0);
	}


    function checkcmtform()

    {

        if(checkname("spBlogCmtor")&&checkeandu("spBlogCmtURL")&&checktext("spBlogCmtText")&&cmtfull())

        {
            if(baidu.g("shareBlog").checked && !ShareBlog.isHostReply){
                baidu.g("shareBlogEchoback").value = "shareblog"; 
                ShareBlog.submit(Session.spToken);
            }else{
                baidu.g("shareBlogEchoback").value = "";
            }
            location.hash = "lastcmt";
            submitForm();

            return true;

        }

        else

        {

            return false;

        }

    }



    var g_pop=null;

    function submitForm()

    {

        g_pop=new Popup({ contentType:1,isReloadOnClose:false,width:340,height:80});

        g_pop.setContent("title","添加评论");

        g_pop.setContent("contentUrl","");

        g_pop.setContent("someDisabledBtn","btn_ok");

        g_pop.build();

        G("popFormSubmit").target=g_pop.iframeIdName;

        g_pop.show();

    }



    function g_close_pop()

    {

        g_pop.close();

    }



    function formatonlinpic()

    {

        var picobj=document.getElementsByName("onlinepic");

        var picnum=picobj.length;



        for(var i=0;i<picnum;i++)

        {

            if(picobj[i].width>200)

            {

                picobj[i].width=200;

            }

            if(picobj[i].height>200)

            {

                picobj[i].height=200;

            }

        }

        try{baidu.G("btn_ok").disabled = "";}catch(e){}

    }



    function addToFavor(){

        var blogTitle='SIP Using SDP with Offer/Answer Model'.replace(/&#39;/g,'\'');

        window.open('http://cang.baidu.com/do/add?it='+encodeURIComponent(blogTitle+'_百度空间')+'&iu='+encodeURIComponent(location.href)+'&fr=sp#nw=1','_s','scrollbars=no,width=600,height=450,right=75,top=20,status=no,resizable=yes');

        return false;

    }

    function addToiTieba(){
        var blogTitle='SIP Using SDP with Offer/Answer Model'.replace(/&#39;/g,'\'');
        window.open('http://tieba.baidu.com/i/sys/share?link='+encodeURIComponent('http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html')+'&type=text&title='+encodeURIComponent(blogTitle)+'&content=');
    }

    function addToShare(){
        window.open('http://apps.hi.baidu.com/share/?url='+encodeURIComponent('http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html'));
    }


    /* some functions for cmt-reply */
    var g_cmtorInfo = [];
    function goCmtReply(cmtPorID){
        //如果是主人的话，回复别人的评论，是不需要显示分享的
        

        cmtreply(g_cmtorInfo[cmtPorID],cmtPorID);
    }
    function cmtreply(cmtName,cmtPorID)

    {

        cmtName=cmtName.replace(/<|>/g,"");

        window.location.hash="#send";

        var cmtForm=document.form1;

        cmtForm.cm.value="3";

        if(!cmtForm.spReferTarget)

        {

            var ipt=document.createElement("input");

            ipt.type="hidden";

            ipt.name="spReferTarget";

            ipt.value=cmtPorID;

            cmtForm.appendChild(ipt);

        }else cmtForm.spReferTarget.value=cmtPorID;





         //G("reTitle").innerHTML="回复"+cmtName+"：";

         G("cancleReLink").style.display="";

         cmtForm.btn_ok.value="回复评论";





         try{

            editor.window.focus();

            editor.window.document.body.innerHTML="回复"+cmtName+"：";



            var w = editor.window;

            if(w.getSelection){

                var d = w.document;

                var s = w.getSelection();

                var r = d.createRange();

                r.setStartAfter(d.body.firstChild);

                r.setEndAfter(d.body.lastChild);

                s.removeAllRanges();

                s.addRange(r);

            }

        }catch(e){

                try{

                    cmtForm.getElementsByTagName("textarea")[0].focus();

                    cmtForm.getElementsByTagName("textarea")[0].value="回复"+cmtName+"：";

                }catch(e){}

        }

    }



    function canclereply()

    {
        //主人可以分享自己的文章
        ShareBlog.cancelReply();

        var cmtForm=document.form1;

        cmtForm.cm.value="1";

        try{cmtForm.removeChild(cmtForm.spReferTarget);}catch(e){}

        /*

        try{

                var cmt=cmtForm.getElementsByTagName("textarea")[0]

                cmt.value="";

                cmt.focus();

        }catch(e){}

        */



        try{

                var ed=editor.window.document.body;

                ed.innerHTML="";

                editor.window.focus();

            }catch(e){

                var cmt=cmtForm.getElementsByTagName("textarea")[0];

                cmt.value="";

                cmt.focus();

        }



        G("cancleReLink").style.display="none";

        cmtForm.btn_ok.value="发表评论";

    }



    function gotoreply()

    {//to checking whether reply cmt

        if( window.location.hash.indexOf("&re=1")<0) return;

        var cmtID=window.location.hash.split("&")[0].replace("#","");

        var cmtlinks=document.getElementsByTagName("a");

        for(var i=0,n=cmtlinks.length;i<n;i++)

        {

            if(cmtlinks[i].name==cmtID){ var rename=cmtlinks[i].getAttribute("rename");  repid=cmtlinks[i].getAttribute("repid"); break;}

        }

        if(typeof(rename)!="undefined"){

            cmtreply(rename, repid);

        }

    }

    
    
    function f_focus(){
        getVcode();
    }
    function getVcode(){
        var url="http://hi.baidu.com/sys/file/getvcode?echoback=getVcodeDone&t="+(new Date().getTime());
        BdAjax.loadJS(url)
    }

    function getVcodeDone(vcode){
        document.form1.spVcode.value=vcode;
        var imgsrc="http://hiup.baidu.com/cgi-bin/genimg?"+vcode;
        G('verifypic').src=imgsrc;
        G('yanzheng').style.display="block";
    }
    function newverifypic(){
        getVcode();
        return false;
    }

    function blogdel(str)

    {

        var pop=new Popup({ contentType:3,isReloadOnClose:false,width:340,height:80});

        pop.setContent("title","删除文章");

        pop.setContent("confirmCon","您确定要彻底删除这篇文章及其所有评论吗？");

        pop.setContent("callBack",delCallback);

        pop.setContent("parameter",{fid:str,popup:pop});

        pop.build();

        pop.show();

        return false;

    }

    
    function delCallback(para)

    {
        if(!para["popup"])return;

        var o_pop=para["popup"];

        o_pop.config.contentType=1;

        o_pop.setContent("contentUrl","");

        o_pop.reBuild();

        G(para["fid"]).target=o_pop.iframeIdName;
        eval("document.draft"+para["fid"]).submit();

        eval("document."+para["fid"]).submit();

    }



    var _Space = _Space || {};
    
    /********这里的东西，是用来生成评论列表的**********/
   _Space.commentOperate = (function(){
      /*blog评论的浏览*/
    var total_page = 0,
        cmtNumPerPage = 50,
        nowPage = 0,
	    count = 1,
	    comment = new Space.Pubs.Comment(Session.spSpaceDomain+"/cmt/spcmt/");
    //分页的组件
   var pager = (function () {
	var pageNum = '#p#';
	var MAX = 10;
    function getPageBar(allPn, nowPn, tplstr) {
        var Max = 10;
		allPn = Number(allPn);
		nowPn = Number(nowPn) + 1; 
		if (allPn <= 1) {
			return " &nbsp;";
		}
        var _html = [];
        var startPn = Math.max(1, nowPn - Math.floor(MAX / 2));
		var endPn = Math.min(allPn, startPn + MAX - 1);
		startPn = Math.max(1, endPn - MAX + 1);
        if (nowPn > 1) {
			_html.push('<a', tplstr.replace('#p#', 0), '>[首页]</a> ');
			_html.push('<a', tplstr.replace('#p#', (nowPn - 1 - 1)), '>[上一页]</a> ');
		}
        for (var i = startPn; i <= endPn; i++) {
			if (i == nowPn) {
				_html.push('<span>', i, '</span> ');
			} else {
				_html.push('<a', tplstr.replace('#p#', i - 1), '>[', i, ']</a> '); 
			}
		}
		if (nowPn < allPn) {
			_html.push('<a', tplstr.replace('#p#', nowPn), '>[下一页]</a> ');
			_html.push('<a', tplstr.replace('#p#', (allPn - 1)), '>[尾页]</a> ');
		}
       return _html.join('');
	}
	return {
		render: getPageBar
	}
})();

//获取评论数据后，callback，在页面上展现
var viewCallBack = function(data){
    var response = data;
    if(response.err_no == 0){
    if (response.body.data && response.body.total_count) {
        var all_page = Math.ceil(response.body.total_count / cmtNumPerPage);
        total_page = all_page - 1;
        if("#lastcmt" == location.hash){
            location.hash = ""+total_page;
            view(total_page);
            
            return;
        }
        var output = [];
        baidu.each(response.body.data, function (list) {
            output.push(generateHtml(list));

        });
        count = 1;
        baidu.G('userCommentList').innerHTML = output.join('');
        baidu.G('blogCmtCount').innerHTML = response.body.total_count;
        
        baidu.G('page').innerHTML = pager.render(all_page, nowPage, ' href="#"  onclick="_Space.commentOperate.view(#p#);return false;"');
        filterCmtContent('userCommentList');//在非ie浏览器对闪光字做处理
        SP.mycard.bind('m_blog'); 
       //锚点会让链接的颜色发生变化，用js来实现锚点功能
        var scrollObj = baidu.g("in_comment"); 
        if(scrollObj){
		 scrollObj.scrollIntoView();
	    }    
	
     }
 }
};
 
    var generateHtml = function(data) {
	var generateOprate = function(type,id,portraitId,cmtname,isHost, isAnnony, canReply, isMobile) {
		var data = [];
		if (isMobile) {
			data.push('  <a href="http://hi.baidu.com/hi/cms/article/help_phone/index.html" target="_blank" style="text-decoration:none;">来自手机<img src="http://img.baidu.com/hi/img/mobile.gif" align="absmiddle" border="0"/></a>');
		}
		if (canReply && isCmtAllow) {
			if (isAnnony) {
				data.push(' | <a href="#" onclick="BdUtil.relogin();return false;">回复</a>');
			} else {
				data.push(' | <a href="#" onclick="goCmtReply(\'' + portraitId + '\');return false;">回复</a>');
			}
		}
       if (isHost) {              
			data.push(' | <a href="#" onclick="_Space.commentOperate.deleteCmt(\'' + id + '\');return false;">删除</a>');
			var cName = type==1?cmtname:'';
			data.push(' | <a href="#" onclick="userSpam.tipBlogCmt(this,\'' + cName + '\',\'' + id + '\',\'' + blogId + '\'); return false;">举报</a>');
			
	
		}
		return data.join("");
	};
    var generateUser = function(type, id, cmtname, cmturl, portraitId) {
		if ("1" == type) {
			return "<a  href='{1}' target='_blank' class='ucard' pid='{2}'><img border='0' src='http://tx.bdimg.com/sys/portraitn/item/{2}.jpg'><br />{3}</a>".format(id, cmturl, portraitId, cmtname);
		} else {
			if (cmtname == "" || cmtname == "匿名网友") {
				if (cmturl == "") {
					return "<a>匿名网友</a>";
				} else {

					return "<a href='{1}' target='_blank' class='ucard' pid='{0}'>{2}</a>".format(portraitId, cmturl, cmtname);

				}

			} else {
				if (cmturl == "") {
					return "<div class='f14' style='display:inline'>网友:<a>{0}</a></div>".format(cmtname);
				} else {
					return "<div class='f14' style='display:inline'>网友:<a href='{1}' target='_blank' title='{1}'>{2}</a></div>".format(id, cmturl, cmtname);
				}

			}

		}
	};
    var type = 0,
	isMobile = data.reserved1,
	isHost = Session.isHost,
	isAnnony = Session.visitorPortrait == '00000000' ? true: false,
	portraitId = data.portrait,
	canReply = portraitId == Session.visitorPortrait ? false: true,
	id = data.reply_id_enc,
	cmtname = data.un,
	cmturl = cmtname ? 'http://hi.baidu.com/sys/checkuser/' + cmtname + '/1': '',
	isCmtAllow =  true ,
	blogId = "8410aca8b58b7ff51f17a26a";
	if (cmtname && cmturl && portraitId) {
		type = 1;
	}
	g_cmtorInfo[portraitId] = cmtname;

	var html = [],
        perPage = cmtNumPerPage,
        listCount = count + nowPage*perPage;
    html.push('<a name="'+id+'" rename="'+cmtname+'" repid="'+portraitId+'"></a>');
	html.push('<table width="100%" border="0" cellspacing="0" cellpadding="0" class="item" style="table-layout:fixed;word-wrap:break-word;overflow:hidden;"><tr>');
	html.push('<td valign="top" class="index" width="5%">'+listCount+'</td>');
    html.push('<td align="center" valign="top" width="10%"><div class="user" style="overflow:hidden;">');
	html.push(generateUser(type, id, cmtname, cmturl, portraitId));
	html.push('</div></td><td class="cnt" style="padding-left:20px;">');
    html.push('<span class="date">');
	var pattern='yyyy-MM-dd HH:mm';
	var date_time = new Date();
    date_time.setTime(parseInt(data.cdatetime) * 1000);
    html.push(baidu.date.format(date_time,pattern));
	html.push(generateOprate(type,id,portraitId,cmtname,isHost, isAnnony, canReply, isMobile));
	html.push("</span>")
	html.push('<div class="desc" style="overflow:hidden;word-break:normal;"  name="cmtcontent">');
	html.push(data.content);
    html.push('</div></td></tr></table>');
	html.push('<div class="line">&nbsp;</div>');
	count++;	
	return html.join("");
	
};
   //获取评论列表
var  view = function(page){
   var  threadId ="8410aca8b58b7ff51f17a26a";
   page = page || 0;
   var obj={"thread_id_enc":threadId,"callback":"_Space.commentOperate.viewCallBack","start":page*cmtNumPerPage,"count":cmtNumPerPage,"orderby_type":0};
   nowPage = page;
   comment.view(obj);
};
	
	
	
            function deleteCmt(cid){
            var pop=new Popup({ contentType:3,isReloadOnClose:false,width:340,height:80});

            pop.setContent("title","删除评论");

            pop.setContent("confirmCon","您确定要彻底删除这条评论吗？");

            pop.setContent("callBack", function(){
            
                var o_pop=pop;
                var _F = baidu.G('blogCmtSubmitForm');
                _F.spBlogCmtID.value=cid;
                _F.spRefURL.value = window.location.href;

                o_pop.config.contentType=1;

                o_pop.setContent("contentUrl","");

                o_pop.reBuild();

                _F.target=o_pop.iframeIdName;

                _F.submit();
            });

            pop.build();

            pop.show();

            return false;
        }
          
		  function filterCmtContent(n){

            if(!baidu.browser.ie){

                var defaultfilter1='<span style="filter:glow(color=#000000,strength=2);height:0px;color:#000000">';

                var defaultfilter2='<span style="height: 0px; color: rgb(0, 0, 0);">';

                var commentDiv=document.getElementById(n);

                var divs=commentDiv.getElementsByTagName('div');

                var d,tmp;

                for( var i=0,len=divs.length;i<len;i++){

                    d=divs[i];

                    if(d.getAttribute('name')=='cmtcontent'){

                        tmp=d.innerHTML;

                        tmp=tmp.replace(/<span style="filter:glow\(color=#([0-9a-z]{3,6}),strength=2\);height:0px;color:#([0-9a-z]{3,6})">/ig,defaultfilter1);

                        tmp=tmp.replace('<span style="height: 0px; color: rgb(255, 255, 255);">',defaultfilter2);

                        d.innerHTML=tmp;

                    }

                }

            }

        }

        return {
            view : view,
			viewCallBack : viewCallBack,
            deleteCmt : deleteCmt
        }
        
    })();
    
    /**********分享该文章的用户功能**********/
    

    
    

    /*********最近读者*********/
    _Space.latestReader=(function(){
        var g_read=[

        

        ["zhongxiakuihai","cb6c7a686f6e677869616b7569686169f00c","zhongxiakuihai"],

        

        ["bisake","4652626973616b653d0b","bisake"],

        

        ["netlion","99107a68616f6b657777775a0b","zhaokewww"],

        

        ["q228209","dfcc71323238323039ca0f","q228209"],

        

        ["webccweb12","962b77656263637765623132a417","webccweb12"],

        

        ["thertherther22","25ca7468657274686572746865723232fd15","thertherther22"],

        

        ["yanglei02xx02","ac1079616e676c6569303278783032650c","yanglei02xx02"],

        

        ["sqwh1121","864173717768313132316d0a","sqwh1121"],

        

        {}

        ];

        g_read.length=g_read.length-1;



        var _rh1="";

        var _rh2="";



        function show(){

            _rh1 += '<table width="100%" ><tr>';

            _rh2+='<tr>';

            if(!Session.isLogin){

                _rh1+='<td align="center" width="10%" ><img border="0" width="55" height="55" src="http://img.baidu.com/hi/img/portraitn.jpg"></td>';

                _rh2+='<td>&nbsp;</td>';

                if(g_read.length>0){

                    _rh1+='<td align="left" width="12%">';

                }else{

                    _rh1+='<td align="left" width="100%">';

                }

                _rh1+='<a href="https://passport.baidu.com/?login&tpl=sp&tpl_reg=sp&u='+myref+'" target="_self" onclick="BdUtil.relogin(); return false;">登录</a>后，您就出现在这里。</td>';

                _rh2+='<td>&nbsp;</td>'

            }

            if(g_read.length==0){

                if(Session.isLogin){

                    _rh1+='<td align=left width="100%">最近还没有登录用户看过这篇文章……</td>';

                    _rh2+='<td>&nbsp;</td>';

                }

            }else{

                for(i=0,len=g_read.length;i<len;i++){

                    _rh1+='<td align="center" valign="bottom" width="10%" class="user"><a href="/'+g_read[i][0]+'" target="_blank" class="ucard" pid="'+g_read[i][1]+'"><img border="0" src="http://tx.bdimg.com/sys/portraitn/item/'+g_read[i][1]+'.jpg"></a></td>';

                    _rh2+='<td align="center" valign="top" class="user"><a href="/'+g_read[i][0]+'" target="_blank" class="ucard" pid="'+g_read[i][1]+'">'+g_read[i][2]+'</a></td>';

                }

            }

            _rh1+='<td width="100%"></td></tr>';

            _rh2+='<td></td></tr></table>';


            baidu.dom.insertHTML("in_reader", "beforeEnd", _rh1+_rh2);

        }

        return {
            show : show
        }
    })();
    

    /*********页面完成后执行的一些东西，比较乱，小心轻放**********/
    _Space.pageDone = (function(){
        
        function initBlogTextForFCK(){
            //fck init music
            if(window.Node){Node.prototype.replaceNode=function(Node){this.parentNode.replaceChild(Node,this);}}
            var imgBox=document.getElementsByName('musicName');
            var isAutoPlay=true;
            for(var i=0,n=imgBox.length;i<n;i++){
                var img=imgBox[i];
                if(img.getAttribute('rel')){
                    var musicSrc=img.getAttribute('rel');
                    var musicDiv = document.createElement("SPAN");
                    var tmp=musicSrc.substr (musicSrc.indexOf('#')+1, 1);
                    var tmpAutoPlay=(tmp=='1');
                    if(isAutoPlay&&tmpAutoPlay){
                        isAutoPlay=false;
                        tmpAutoPlay=true;
                    }else{
                        tmpAutoPlay=false;
                    }
                    var shtml=creatbgmusic(musicSrc.substr(0,musicSrc.indexOf('#')).replace(/[\s><()'"]+/g,''),1,true,false,tmpAutoPlay,tmpAutoPlay,'FckMusicHelper');
                    shtml=shtml.replace('width=100%','width=200').replace('width="100%"','width=200 height=45');			img.replaceNode(musicDiv);
                    musicDiv.innerHTML=shtml;
                    i--;n--;
                }
            }
                //fck init vote
            !function(){
                var vote = document.getElementsByName('FCK_VOTE');
                for(var i=0,len=vote.length,item,rel=0,cdiv;i<len;i++){
                    item = vote[0];
                    rel = item.getAttribute('rel')|0;
                    if(rel){
                        cdiv = document.createElement('span');
                        item.parentNode.replaceChild(cdiv,item);
                        baidu.swf.create({
                            "id": "VOTE_FLASH_"+i,
                            "width" : "585",
                            "height": "100",
                            "ver"   : "9.0.0",
                            "wmode" : document.all ? "opaque" : "window",
                            "allowscriptaccess" : "always",
                            "url"   : "http://hi.bdimg.com/apps/appvote/spaceVote.swf?vote_id="+rel
                        },cdiv)

                    }
                }
            }()
            //document.getElementById('blog_text').style.display='';
        }
        
        function resizeBlogImg(){

            if(document.getElementById("m_blog"))

            {

                var imgarray = document.getElementById("m_blog").getElementsByTagName('img');

                var imgw = document.getElementById("m_blog").offsetWidth;

                imgw =imgw-40;

	            var imgs = []
                for(var i=0; i<imgarray.length; i++){
                    if(imgarray[i].className=="blogimg" && imgarray[i].width>=imgw) {
                        imgs[i]=new Image();
                        (function(_imgarray,_imgs,_i){
                            _imgs[_i].onload=function(){
                                var h=imgw/_imgs[_i].width*_imgs[_i].height;
                                _imgarray[_i].height = h;
                                _imgarray[_i].style.height=h+'px';
                            };
                        })(imgarray,imgs,i);
                        imgs[i].src=imgarray[i].src;
                        imgarray[i].width=imgw;
                        imgarray[i].style.width=imgw+'px';
                    }
                }
            }
        }

        function fixURLCopyBug(){
        
            // Fix ff bugs

            var blog_text = document.getElementById('blog_text');
            /**

            blog_text.innerHTML = blog_text.innerHTML.replace(/href\s*=\s*("|')?(\.\.\/\.\.\/)/gi,"href=$1../$2");
            */
            /*modify by poker, to fix the flashalbum's static domain*/
            var _blog_trans = blog_text.innerHTML.replace(/href\s*=\s*("|')?(\.\.\/\.\.\/)/gi,"href=$1../$2");
            _blog_trans = _blog_trans.replace(/http:\/\/hi\.baidu\.com\/static\/album\/album\.swf/g,"http://hi.bdimg.com/static/album/album.swf");
            blog_text.innerHTML = _blog_trans;
        }

        function getPVData(){

            var hstr="";

            baidu.sio.callByServer("/%C3%F7%D4%C2%D2%B92001/brwstat?key1=1&key2=5e77a04b13f1a92209f7efca_8410aca8b58b7ff51f17a26a_");   
        } 

        function setpv(allnum)

        {

            var num = allnum.split('_');

            baidu.G("result").innerHTML=num[0];

        }

        window.setpv = setpv;
        
        function initCmtEditor(){ //初始化浏览编辑器
            var editor=null;

            try{

                editor=new BdEditor("spBlogCmtText",{width:"100%",height:"155px"});

                editor.onfocus = function(){hidErr(3);}

                editor.render();

                //如果用户没有登陆，焦点进入编辑器，弹出登录框
				
                var editorCont=editor.window;
				baidu.Q("ToolbarContainer",baidu.G("in_send"))[0].style.display="none";
                baidu.on(editorCont,"focus",function(){
				BdUtil.relogin();
				return false;
				});
				

            }catch(e){

                var spBlogCmtText = document.getElementById("spBlogCmtText");
                if(!spBlogCmtText ) return false;

                var p = spBlogCmtText.previousSibling;

                while(p && p.nodeType != 1) p = p.previousSibling;

                if(p && /bdeditor_container/.test(p.id)){

                    p.parentNode.removeChild(p);

                }

                spBlogCmtText.style.display = '';

                editor=null;

            }

            

            window.editor = editor;
        }

        function ok(){
            getPVData();
            resizeBlogImg();
            fixURLCopyBug();
            initBlogTextForFCK();
            initCmtEditor();

            gotoreply(); /* external fun*/
        }

        return {
            ok : ok
        }
    })();
	
	function relative_Click(){
		BdUtil.ns_trackerLink('m_20110329_relative_article','')
	}
    /********分段加载处理对象，实验性功能*********/
    _Space.SectionLoad = (function(){

        var loaded = false;

        var sectioinList = [];

        function complete(item){
            item.isComplete = true;
        }

        function add(mod, loadCallback){

            var mod = baidu.G(mod);
            
            sectioinList.push({"mod": mod, "callback":loadCallback});
        }

        function startLoad(item){
            item['callback']();
            complete(item);
        }

        function checkStat(){
            if(sectioinList.length <= 0) return;

            var pageTop2bottom=getPageTop2bottom();
            
            baidu.each(sectioinList, function(item, index){

                if(! item.isComplete){
                    if(getOffsetTop(item.mod)-100 <= pageTop2bottom)
                        startLoad(item);
                }
            });
        }

        function getOffsetTop(mod){
            return baidu.dom.getPosition(mod).top;
        }

        function getPageTop2bottom(){
            var dsh = baidu.page.getScrollTop();
            var dch = baidu.page.getViewHeight();

            return dsh + dch;
        }

        
        baidu.on(window, 'resize', checkStat);
        baidu.on(window, 'onload', checkStat);
        baidu.on(window, 'scroll', checkStat);
        
        return {
            "add" : add
        } 
    })();

    /*******Start Working！*******/
    var _pageEndTime=(new Date().getTime()) - g_pageTimerStart;

    baidu.on(window, 'load', function(){
        var _pageLoadTime=(new Date().getTime()) - g_pageTimerStart;

        BdUtil.hi_trackerLink('m_20101109_blogloadtime', _pageLoadTime+'|'+_pageEndTime);
    });

    /**********Step2***********/
    _Space.pageDone.ok();

    baidu.G('share_user_list') && _Space.SectionLoad.add('share_user_list', _Space.BlogSharedUser.getData);
    baidu.G('in_related_tmp') && _Space.SectionLoad.add('in_related_tmp', _Space.RelatedDoc.show);
    baidu.G('in_reader') && _Space.SectionLoad.add('in_reader', _Space.latestReader.show);
    baidu.G('blogOpt') && _Space.SectionLoad.add('blogOpt', _Space.commentOperate.view);
</script>




	<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/refer.js"></script><div id="xp" style="position: absolute; z-index: 65531 !important; overflow-x: hidden; overflow-y: hidden; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); left: 702px; top: 1795px; width: 304px; height: 28px; "><div id="xp_content" style="position: absolute; z-index: 1; overflow-x: hidden; overflow-y: hidden; border-left-width: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; width: 304px; height: 229px; left: 0px; top: 0px; "><a id="closeButton" href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#" style="position: absolute; z-index: 2; font-size: 0px; line-height: 0px; left: 270px; top: 6px; width: 13px; height: 13px; background-image: url(http://img.baidu.com/hi/img/refer/blogrecommend_hz_003.gif); "></a><a id="switchButton" href="http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a.html#" style="position: absolute; z-index: 2; font-size: 0px; line-height: 0px; left: 250px; top: 6px; width: 13px; height: 13px; background-image: url(http://img.baidu.com/hi/img/refer/yzq_001.gif); "></a><div id="ifm_div" style="height:245px;"><iframe id="xp_content_iframe" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/refer.htm" frameborder="0" scrolling="no" width="100%" height="100%" allowtransparency="true"></iframe></div></div></div>
	
<link rel="stylesheet" type="text/css" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/userset.css">
<link rel="stylesheet" type="text/css" href="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/widget.css">

<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/301a97f1ee8169c37831aa6b.js"></script>

<script type="text/javascript">
//页面状态变量
var Session = Session || {
    spaceURL: "/%C3%F7%D4%C2%D2%B92001",
    pageURL: "http://hi.baidu.com/%C3%F7%D4%C2%D2%B92001/blog/item/8410aca8b58b7ff51f17a26a%2Ehtml",    //当前访问的url
    isHost: "",         // 是否是空间主人
    userName: "明月夜2001",   // 空间主人用户名
    userNameEnc:    "%C3%F7%D4%C2%D2%B92001", 
    visitorName:    "",
    visitorURL: "/index.html",        // 
    refer: "http://www.google.ca/search?hl=zh-CN&q=SIP+SDP+offer+answer&oq=SIP+SDP+offer+answer&aq=f&aqi=&aql=&gs_sm=e&gs_upl=493295l497121l0l497440l18l16l0l10l0l0l184l184l0.1l1l0",
    spBasicURL:"明月夜2001",
    spBasicURLEnc:"%C3%F7%D4%C2%D2%B92001"
};
</script>
<script src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/render.js" type="text/javascript"></script>
<script type="text/javascript">
baidu.dom.ready(function(){
    if(typeof spBeautifyConfigData != 'undefined'){
        var _installList = spBeautifyConfigData.list;
    } else {
        spBeautifyConfigData = {};
        _installList = [];
    }
    spBeautifyConfigData.currentDate  = Math.round((new Date('2011/10/14')).getTime() / 1000);    
    BeautifyWidget.init({timeStamp: spBeautifyConfigData.currentDate, env: 'sys'});
    BeautifyWidget.render(_installList);
	if(Space && Space.ActiveTip){
		if(baidu.g("active_space")){
			window.active_tip=new Space.ActiveTip("tary_space_name",function(){
				active_tip.hidden();
				//activeSpace("pop_tip");
				if(BdUtil && BdUtil.ns_trackerLink){
					BdUtil.ns_trackerLink('nm_20101018_activeBlank',''); 
				}
				window.open('http://hi.baidu.com/reg/preihome?pageDomain=pop_tip');
			//	window.location.href="http://hi.baidu.com/reg/preihome?pageDomain=pop_tip";
				setTimeout(function(){
					window.location.reload();
				},1000);
				
			
			});
		}
		window.succTip=function(spaceUrl){
			active_dia.close();
			//var tiphtml="<div><div class='setBlackcon'>恭喜您，激活成功！欢迎入驻百度空间！</div><div class='setBlackpanel'><div class='blackConfirmbtn' onclick=\"goIhome('"+spaceUrl+"')\">确认</div></div></div>";
			BdDialog.Alert("恭喜您，激活成功！欢迎入驻百度空间！");
			baidu.g("dialogYES").onclick=function(){
				window.location.reload();
			};	
		};
	}
	
});
</script>



<script type="text/javascript" src="./SIP Using SDP with Offer Answer Model_二十四桥明月夜_百度空间_files/auto.js"></script>
<script>
try{SCD.init("http://www.google.ca/search?hl=zh-CN&q=SIP+SDP+offer+answer&oq=SIP+SDP+offer+answer&aq=f&aqi=&aql=&gs_sm=e&gs_upl=493295l497121l0l497440l18l16l0l10l0l0l184l184l0.1l1l0")}catch(e){}
</script>


</body></html>